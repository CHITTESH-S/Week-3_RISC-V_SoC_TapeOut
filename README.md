# ğŸŒŸ RISC-V SoC Tapeout â€“ Week-3: Post-Synthesis Gate-Level Simulation (GLS) and STA Fundamentals

> **Purpose:** Verify BabySoC behavior after synthesis (gate-level netlist) and generate post-synthesis waveforms & logs for submission.

---

## ğŸš€ Quick summary

ğŸ” **What:** Run synthesis (Yosys) -> produce gate-level netlist -> run Gate-Level Simulation (GLS) with/without SDF -> inspect waveforms (GTKWave) -> compare against RTL/functional simulation.

ğŸ¯ **Goal:** Confirm that the synthesized design (`vsdbabysoc.synth.v`) behaves identically to the RTL model for the provided test vectors and capture evidence for deliverables.

---

## ğŸ“‚ Recommended repository layout

```
BabySoC/
â”œâ”€ src/
â”‚  â”œâ”€ module/
â”‚  â”‚  â”œâ”€ vsdbabysoc.v
â”‚  â”‚  â”œâ”€ rvmyth.v
â”‚  â”‚  â”œâ”€ clk_gate.v
â”‚  â”‚  â””â”€ testbench.v
â”‚  â””â”€ include/
â”œâ”€ src/lib/
â”‚  â”œâ”€ sky130_fd_sc_hd__tt_025C_1v80.lib
â”‚  â”œâ”€ avsdpll.lib
â”‚  â””â”€ avsddac.lib
â””â”€ output/
   â””â”€ post_synth_sim/
      â”œâ”€ vsdbabysoc.synth.v
      â”œâ”€ post_synth_sim.out
      â””â”€ post_synth_sim.vcd
```

---

## ğŸ§­ Synthesis (Yosys) â€” Step-by-Step

1. ğŸ” Start Yosys:

```bash
yosys
```
<div align="center">



</div>

2. ğŸ“¥ Read top-level and modules (use `-I` to include headers):

```yosys
read_verilog /home/chittesh/VLSI/VSDBabySoC/src/module/vsdbabysoc.v
read_verilog -I /home/chittesh/VLSI/VSDBabySoC/src/include /home/chittesh/VLSI/VSDBabySoC/src/module/rvmyth.v
read_verilog -I /home/chittesh/VLSI/VSDBabySoC/src/include /home/chittesh/VLSI/VSDBabySoC/src/module/clk_gate.v
```
<div align="center">



</div>

3. ğŸ“š Load liberty files:

```yosys
read_liberty -lib /home/chittesh/VLSI/VSDBabySoC/src/lib/avsdpll.lib
read_liberty -lib /home/chittesh/VLSI/VSDBabySoC/src/lib/avsddac.lib
read_liberty -lib /home/chittesh/VLSI/VSDBabySoC/src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
```
<div align="center">



</div>

4. ğŸ§© Synthesize the top module:

```yosys
synth -top vsdbabysoc
```
<div align="center">



</div>

5. ğŸ” Map dff/lib primitives:

```yosys
dfflibmap -liberty /home/chittesh/VLSI/VSDBabySoC/src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
```
<div align="center">



</div>

6. âš™ï¸ Optimize & technology map:

```yosys
opt
abc -liberty /home/chittesh/VLSI/VSDBabySoC/src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib -script +strash;scorr;ifraig;retime;{D};strash;dch,-f;map,-M,1,{D}
```
<div align="center">



</div>

7. ğŸ§¼ Final clean-up & rename:

```yosys
flatten
setundef -zero
clean -purge
rename -enumerate
```
<div align="center">



</div>

8. ğŸ“Š Check stats and write netlist:

```yosys
stat
write_verilog -noattr /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/vsdbabysoc.synth.v
```
<div align="center">



</div>

> ğŸ“Œ Tip: Save the full Yosys transcript to `synthesis_logs.txt` for submission.

---

## ğŸ§ª Part - 1: Post-Synthesis Simulation (GLS)

1. ğŸ§¾ Compile the testbench with the synthesized netlist (example using Icarus):

```bash
iverilog -o /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/post_synth_sim.out \
  -DPOST_SYNTH_SIM -DFUNCTIONAL -DUNIT_DELAY=#1 \
  -I /home/chittesh/VLSI/VSDBabySoC/src/include \
  -I /home/chittesh/VLSI/VSDBabySoC/src/module \
  /home/chittesh/VLSI/VSDBabySoC/src/module/testbench.v \
  /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/vsdbabysoc.synth.v
```

2. ğŸ“ Move to output dir:

```bash
cd /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/
```

3. â–¶ï¸ Run the simulation:

```bash
./post_synth_sim.out
```

4. ğŸ” View the waveform in GTKWave:

```bash
gtkwave post_synth_sim.vcd
```
<div align="center">



</div>

> âš ï¸ If you want timing-annotated simulation, back-annotate with an SDF file (generated by your place-and-route tool). SDF may reveal real timing failures â€” run it only if SDF is available.

---


