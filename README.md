# 🌟 RISC-V SoC Tapeout – Week-3: Post-Synthesis Gate-Level Simulation (GLS) and STA Fundamentals

> **Purpose:** Verify BabySoC behavior after synthesis (gate-level netlist) and generate post-synthesis waveforms & logs for submission.

---

## 🚀 Quick summary

🔍 **What:** Run synthesis (Yosys) -> produce gate-level netlist -> run Gate-Level Simulation (GLS) with/without SDF -> inspect waveforms (GTKWave) -> compare against RTL/functional simulation.

🎯 **Goal:** Confirm that the synthesized design (`vsdbabysoc.synth.v`) behaves identically to the RTL model for the provided test vectors and capture evidence for deliverables.

---

## 📂 Recommended repository layout

```
BabySoC/
├─ src/
│  ├─ module/
│  │  ├─ vsdbabysoc.v
│  │  ├─ rvmyth.v
│  │  ├─ clk_gate.v
│  │  └─ testbench.v
│  └─ include/
├─ src/lib/
│  ├─ sky130_fd_sc_hd__tt_025C_1v80.lib
│  ├─ avsdpll.lib
│  └─ avsddac.lib
└─ output/
   └─ post_synth_sim/
      ├─ vsdbabysoc.synth.v
      ├─ post_synth_sim.out
      └─ post_synth_sim.vcd
```

---

## 🧭 Synthesis (Yosys) — Step-by-Step

1. 🔁 Start Yosys:

```bash
yosys
```
<div align="center">



</div>

2. 📥 Read top-level and modules (use `-I` to include headers):

```yosys
read_verilog /home/chittesh/VLSI/VSDBabySoC/src/module/vsdbabysoc.v
read_verilog -I /home/chittesh/VLSI/VSDBabySoC/src/include /home/chittesh/VLSI/VSDBabySoC/src/module/rvmyth.v
read_verilog -I /home/chittesh/VLSI/VSDBabySoC/src/include /home/chittesh/VLSI/VSDBabySoC/src/module/clk_gate.v
```
<div align="center">



</div>

3. 📚 Load liberty files:

```yosys
read_liberty -lib /home/chittesh/VLSI/VSDBabySoC/src/lib/avsdpll.lib
read_liberty -lib /home/chittesh/VLSI/VSDBabySoC/src/lib/avsddac.lib
read_liberty -lib /home/chittesh/VLSI/VSDBabySoC/src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
```
<div align="center">



</div>

4. 🧩 Synthesize the top module:

```yosys
synth -top vsdbabysoc
```
<div align="center">



</div>

5. 🔁 Map dff/lib primitives:

```yosys
dfflibmap -liberty /home/chittesh/VLSI/VSDBabySoC/src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
```
<div align="center">



</div>

6. ⚙️ Optimize & technology map:

```yosys
opt
abc -liberty /home/chittesh/VLSI/VSDBabySoC/src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib -script +strash;scorr;ifraig;retime;{D};strash;dch,-f;map,-M,1,{D}
```
<div align="center">



</div>

7. 🧼 Final clean-up & rename:

```yosys
flatten
setundef -zero
clean -purge
rename -enumerate
```
<div align="center">



</div>

8. 📊 Check stats and write netlist:

```yosys
stat
write_verilog -noattr /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/vsdbabysoc.synth.v
```
<div align="center">



</div>

> 📌 Tip: Save the full Yosys transcript to `synthesis_logs.txt` for submission.

---

## 🧪 Part - 1: Post-Synthesis Simulation (GLS)

1. 🧾 Compile the testbench with the synthesized netlist (example using Icarus):

```bash
iverilog -o /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/post_synth_sim.out \
  -DPOST_SYNTH_SIM -DFUNCTIONAL -DUNIT_DELAY=#1 \
  -I /home/chittesh/VLSI/VSDBabySoC/src/include \
  -I /home/chittesh/VLSI/VSDBabySoC/src/module \
  /home/chittesh/VLSI/VSDBabySoC/src/module/testbench.v \
  /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/vsdbabysoc.synth.v
```

2. 📁 Move to output dir:

```bash
cd /home/chittesh/VLSI/VSDBabySoC/output/post_synth_sim/
```

3. ▶️ Run the simulation:

```bash
./post_synth_sim.out
```

4. 🔍 View the waveform in GTKWave:

```bash
gtkwave post_synth_sim.vcd
```
<div align="center">



</div>

> ⚠️ If you want timing-annotated simulation, back-annotate with an SDF file (generated by your place-and-route tool). SDF may reveal real timing failures — run it only if SDF is available.

---


